(()=>{"use strict";var e,o={144:()=>{const e=window.wp.element,o=(window.wp.i18n,window.wp.data),t=window.wp.components,n=window.ReactJSXRuntime,s=window.hc_wcma_block_params||{},c=s.i18n||{},r=({addressType:r="billing"})=>{const a=s.defaultKeys?.[r]||"",[l,i]=(0,e.useState)(a),[p,u]=(0,e.useState)(!1),m=s.addresses||{},h=m[r]||{},g=Object.keys(h).length>0?Object.values(h):[],w="yes"===s.allow_new,k=s.selector_style||"dropdown",y=(0,e.useCallback)((e=>{u(!0);const t={[r+"_address"]:e};return(0,o.dispatch)("wc/store/cart").updateCustomerData(t,!1).then((()=>{u(!1)})).catch((e=>{throw u(!1),e}))}),[o.dispatch,r]),f=(0,e.useCallback)((e=>{if(i(e),u(!0),"new"===e||""===e){y({first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",phone:"",email:""}).then((()=>{u(!1),d(r,!0)})).catch((()=>{u(!1),d(r,!0)}))}else{const o=m[r]?.[e];if(o){const e={};e.first_name=o.first_name||"",e.last_name=o.last_name||"",e.company=o.company||"",e.address_1=o.address_1||"",e.address_2=o.address_2||"",e.city=o.city||"",e.state=o.state||"",e.postcode=o.postcode||"",e.country=o.country||"",e.phone=o.phone||"",e.email=o.email||"",y(e).then((()=>{u(!1),d(r,!1)})).catch((()=>{u(!1),d(r,!0)}))}else console.error(`[HCMA Block Frontend ${r}] Could not find address data for key:`,e),d(r,!0),u(!1)}}),[r,m,y]);(0,e.useEffect)((()=>{if(a&&h[a]){i(a);const e=h[a],o={};o.first_name=e.first_name||"",o.last_name=e.last_name||"",o.company=e.company||"",o.address_1=e.address_1||"",o.address_2=e.address_2||"",o.city=e.city||"",o.state=e.state||"",o.postcode=e.postcode||"",o.country=e.country||"",o.phone=e.phone||"",o.email=e.email||"",y(o).then((()=>d(r,!1))).catch((()=>d(r,!0)))}else console.log(`[HCMA Blocks ${r}] No valid default key found. Ensuring form is visible.`),i(""),d(r,!0)}),[a,r,h,y]);const b=[];if(g.forEach((e=>{if(!e.key)return void console.warn(`[HCMA Blocks Frontend ${r}] Address missing 'key':`,e);let o=e.nickname||e.address_1||e.city||e.key;e.key===a&&(o+=` ${c.default_label||"(Default)"}`),b.push({label:o,value:e.key})})),w&&b.push({label:c.new_address||"Enter a new address",value:"new"}),b.length<=(w?2:1))return console.log(`[HCMA Blocks Frontend ${r}] Conditions not met for display (options.length=${b.length}, allowNew=${w}). Returning null.`),null;try{return(0,n.jsxs)("div",{className:`hc-wcma-block-checkout-selector hc-wcma-${r}-selector ${p?"is-loading":""} wp-block-hc-wcma-address-selector`,children:[(0,n.jsx)("div",{style:{marginBottom:"1em",opacity:p?.5:1,pointerEvents:p?"none":"auto"},children:"list"===k?(0,n.jsx)(t.RadioControl,{selected:l,options:b,onChange:f,className:"hc-wcma-address-radio-list"}):(0,n.jsx)(t.SelectControl,{value:l,options:b,onChange:f,className:"hc-wcma-address-select"})}),p&&(0,n.jsx)("p",{className:"hc-wcma-loading-text",children:c.loading||"Loading..."})]})}catch(e){return console.error(`[HCMA Blocks Frontend ${r}] Error during render:`,e),(0,n.jsx)("p",{style:{color:"red",border:"1px solid red",padding:"5px"},children:"Error rendering HCMA selector!"})}};function a(){const o=s.addresses||{},t=o.billing&&Object.keys(o.billing).length>0,c=o.shipping&&Object.keys(o.shipping).length>0,a="yes"===s.allow_new;if(t||a){const o=document.querySelector(".wp-block-woocommerce-checkout-billing-address-block .wc-block-components-checkout-step__content");if(o){const t=document.createElement("div");if(t.className="hc-wcma-billing-mount-point",o.prepend(t),!t.dataset.reactMounted)try{(0,e.render)((0,n.jsx)(r,{addressType:"billing"}),t),t.dataset.reactMounted="true"}catch(e){console.error("[HCMA Blocks Frontend] Error mounting billing component:",e)}}else console.warn("[HCMA Blocks Frontend] Billing parent target not found.")}else console.log("[HCMA Blocks Frontend] Skipping Billing selector - no addresses and new not allowed.");if(c||a){const o=document.querySelector(".wp-block-woocommerce-checkout-shipping-address-block .wc-block-components-checkout-step__content");if(o){const t=document.createElement("div");if(t.className="hc-wcma-shipping-mount-point",o.prepend(t),!t.dataset.reactMounted)try{(0,e.render)((0,n.jsx)(r,{addressType:"shipping"}),t),t.dataset.reactMounted="true"}catch(e){console.error("[HCMA Blocks Frontend] Error mounting shipping component:",e)}}else console.warn("[HCMA Blocks Frontend] Shipping parent target not found.")}else console.log("[HCMA Blocks Frontend] Skipping Shipping selector.");setTimeout(l,100)}function l(){const e=document.querySelectorAll(".wc-block-components-address-card .wc-block-components-address-card__edit");e.length>0&&e.forEach((e=>{e.style.display="none"}))}function d(e,o){const t=`#${e}-fields .wc-block-components-address-address-wrapper`,n=document.querySelector(t);n?o?n.classList.add("is-editing"):(n.classList.remove("is-editing"),setTimeout((()=>l()),100)):console.warn(`[HCMA Blocks ${e}] Wrapper '${t}' not found to toggle is-editing.`)}let i=null;function p(){const o=document.querySelector(".wp-block-woocommerce-checkout");o?i?u("Checkout observer already running."):(i=new MutationObserver((o=>{let t=!1;for(const e of o)if("childList"===e.type&&e.addedNodes.length>0&&e.addedNodes.forEach((e=>{1===e.nodeType&&(e.matches(".wp-block-woocommerce-checkout-billing-address-block")||e.querySelector(".wp-block-woocommerce-checkout-billing-address-block"))&&(t=!0)})),t)break;t&&setTimeout((()=>function(o){const t=s.addresses||{},c=t[o]&&Object.keys(t[o]).length>0,a="yes"===s.allow_new;if(!c&&!a)return;const l=document.querySelector(".wp-block-woocommerce-checkout-billing-address-block .wc-block-components-checkout-step__content");if(l){let t=l.querySelector(`.hc-wcma-${o}-mount-point`);if(t)u(`Mount point already exists for ${o}.`);else{t=document.createElement("div"),t.className=`hc-wcma-${o}-mount-point`;const e=l.querySelector(".wc-block-components-checkout-step__content");e?e.parentNode.insertBefore(t,e):l.prepend(t)}if(!t.dataset.reactMounted)try{(0,e.render)((0,n.jsx)(r,{addressType:o}),t),t.dataset.reactMounted="true",d(o,!1)}catch(e){console.error(`Error mounting ${o} component:`,e)}}}("billing")),150)})),i.observe(o,{childList:!0,subtree:!0})):console.warn("[HCMA Blocks] Checkout container not found for observer.")}function u(e,...o){const t=new Date,n=`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}:${String(t.getSeconds()).padStart(2,"0")}.${String(t.getMilliseconds()).padStart(3,"0")}`;console.log(`[${n}] ${e}`,...o)}document.addEventListener("DOMContentLoaded",(()=>{setTimeout(a,750),setTimeout(p,1500)}))}},t={};function n(e){var s=t[e];if(void 0!==s)return s.exports;var c=t[e]={exports:{}};return o[e](c,c.exports,n),c.exports}n.m=o,e=[],n.O=(o,t,s,c)=>{if(!t){var r=1/0;for(i=0;i<e.length;i++){for(var[t,s,c]=e[i],a=!0,l=0;l<t.length;l++)(!1&c||r>=c)&&Object.keys(n.O).every((e=>n.O[e](t[l])))?t.splice(l--,1):(a=!1,c<r&&(r=c));if(a){e.splice(i--,1);var d=s();void 0!==d&&(o=d)}}return o}c=c||0;for(var i=e.length;i>0&&e[i-1][2]>c;i--)e[i]=e[i-1];e[i]=[t,s,c]},n.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={15:0,278:0};n.O.j=o=>0===e[o];var o=(o,t)=>{var s,c,[r,a,l]=t,d=0;if(r.some((o=>0!==e[o]))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(l)var i=l(n)}for(o&&o(t);d<r.length;d++)c=r[d],n.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return n.O(i)},t=globalThis.webpackChunkhappycoders_multiple_addresses=globalThis.webpackChunkhappycoders_multiple_addresses||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})();var s=n.O(void 0,[278],(()=>n(144)));s=n.O(s)})();