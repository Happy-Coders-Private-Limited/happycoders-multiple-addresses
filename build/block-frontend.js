(()=>{"use strict";var e,t={144:()=>{const e=window.wp.element,t=(window.wp.i18n,window.wp.data),o=window.wp.components,n=window.ReactJSXRuntime,s=window.hc_wcma_block_params||{},c=s.i18n||{},r=({addressType:r="billing"})=>{const a=s.defaultKeys?.[r]||"",[l,i]=(0,e.useState)(a),[p,u]=(0,e.useState)(!1),m=s.addresses||{},h=m[r]||{},w=Object.keys(h).length>0?Object.values(h):[],g="yes"===s.allow_new,y=s.selector_style||"dropdown",b=(0,e.useCallback)((e=>{u(!0);const o={[r+"_address"]:e};return(0,t.dispatch)("wc/store/cart").updateCustomerData(o,!1).then((()=>{u(!1)})).catch((e=>{throw u(!1),e}))}),[t.dispatch,r]),k=(0,e.useCallback)((e=>{if(i(e),u(!0),"new"===e||""===e){b({first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",phone:"",email:""}).then((()=>{u(!1),d(r,!0)})).catch((()=>{u(!1),d(r,!0)}))}else{const t=m[r]?.[e];if(t){const e={};e.first_name=t.first_name||"",e.last_name=t.last_name||"",e.company=t.company||"",e.address_1=t.address_1||"",e.address_2=t.address_2||"",e.city=t.city||"",e.state=t.state||"",e.postcode=t.postcode||"",e.country=t.country||"",e.phone=t.phone||"",e.email=t.email||"",b(e).then((()=>{u(!1),d(r,!1)})).catch((()=>{u(!1),d(r,!0)}))}else d(r,!0),u(!1)}}),[r,m,b]);(0,e.useEffect)((()=>{if(a&&h[a]){i(a);const e=h[a],t={};t.first_name=e.first_name||"",t.last_name=e.last_name||"",t.company=e.company||"",t.address_1=e.address_1||"",t.address_2=e.address_2||"",t.city=e.city||"",t.state=e.state||"",t.postcode=e.postcode||"",t.country=e.country||"",t.phone=e.phone||"",t.email=e.email||"",b(t).then((()=>d(r,!1))).catch((()=>d(r,!0)))}else i(""),d(r,!0)}),[a,r,h,b]);const f=[];if(w.forEach((e=>{if(!e.key)return;let t=e.nickname||e.address_1||e.city||e.key;e.key===a&&(t+=` ${c.default_label||"(Default)"}`),f.push({label:t,value:e.key})})),g&&f.push({label:c.new_address||"Enter a new address",value:"new"}),f.length<1)return null;try{return(0,n.jsxs)("div",{className:`hc-wcma-block-checkout-selector hc-wcma-${r}-selector ${p?"is-loading":""} wp-block-hc-wcma-address-selector`,children:[(0,n.jsx)("div",{style:{marginBottom:"1em",opacity:p?.5:1,pointerEvents:p?"none":"auto"},children:"list"===y?(0,n.jsx)(o.RadioControl,{selected:l,options:f,onChange:k,className:"hc-wcma-address-radio-list"}):(0,n.jsx)(o.SelectControl,{value:l,options:f,onChange:k,className:"hc-wcma-address-select"})}),p&&(0,n.jsx)("p",{className:"hc-wcma-loading-text",children:c.loading||"Loading..."})]})}catch(e){return(0,n.jsx)("p",{style:{color:"red",border:"1px solid red",padding:"5px"},children:"Error rendering HCMA selector!"})}};function a(){const t=s.addresses||{},o=t.billing&&Object.keys(t.billing).length>0,c=t.shipping&&Object.keys(t.shipping).length>0,a="yes"===s.allow_new;if(o||a){const t=document.querySelector(".wp-block-woocommerce-checkout-billing-address-block .wc-block-components-checkout-step__content");if(t){const o=document.createElement("div");if(o.className="hc-wcma-billing-mount-point",t.prepend(o),!o.dataset.reactMounted)try{(0,e.render)((0,n.jsx)(r,{addressType:"billing"}),o),o.dataset.reactMounted="true"}catch(e){console.error("[HCMA Blocks Frontend] Error mounting billing component:",e)}}}else console.log("[HCMA Blocks Frontend] Skipping Billing selector - no addresses and new not allowed.");if(c||a){const t=document.querySelector(".wp-block-woocommerce-checkout-shipping-address-block .wc-block-components-checkout-step__content");if(t){const o=document.createElement("div");if(o.className="hc-wcma-shipping-mount-point",t.prepend(o),!o.dataset.reactMounted)try{(0,e.render)((0,n.jsx)(r,{addressType:"shipping"}),o),o.dataset.reactMounted="true"}catch(e){console.error("[HCMA Blocks Frontend] Error mounting shipping component:",e)}}}else console.log("[HCMA Blocks Frontend] Skipping Shipping selector.");setTimeout(l,100)}function l(){const e=document.querySelectorAll(".wc-block-components-address-card .wc-block-components-address-card__edit");e.length>0&&e.forEach((e=>{e.style.display="none"}))}function d(e,t){const o=`#${e}-fields .wc-block-components-address-address-wrapper`,n=document.querySelector(o);n?t?n.classList.add("is-editing"):(n.classList.remove("is-editing"),setTimeout((()=>l()),100)):console.warn(`[HCMA Blocks ${e}] Wrapper '${o}' not found to toggle is-editing.`)}let i=null;function p(){const t=document.querySelector(".wp-block-woocommerce-checkout");t&&(i?u("Checkout observer already running."):(i=new MutationObserver((t=>{let o=!1;for(const e of t)if("childList"===e.type&&e.addedNodes.length>0&&e.addedNodes.forEach((e=>{1===e.nodeType&&(e.matches(".wp-block-woocommerce-checkout-billing-address-block")||e.querySelector(".wp-block-woocommerce-checkout-billing-address-block"))&&(o=!0)})),o)break;o&&setTimeout((()=>function(t){const o=s.addresses||{},c=o[t]&&Object.keys(o[t]).length>0,a="yes"===s.allow_new;if(!c&&!a)return;const l=document.querySelector(".wp-block-woocommerce-checkout-billing-address-block .wc-block-components-checkout-step__content");if(l){let o=l.querySelector(`.hc-wcma-${t}-mount-point`);if(o)u(`Mount point already exists for ${t}.`);else{o=document.createElement("div"),o.className=`hc-wcma-${t}-mount-point`;const e=l.querySelector(".wc-block-components-checkout-step__content");e?e.parentNode.insertBefore(o,e):l.prepend(o)}if(!o.dataset.reactMounted)try{(0,e.render)((0,n.jsx)(r,{addressType:t}),o),o.dataset.reactMounted="true",d(t,!1)}catch(e){console.error(`Error mounting ${t} component:`,e)}}}("billing")),150)})),i.observe(t,{childList:!0,subtree:!0})))}function u(e,...t){const o=new Date,n=`${String(o.getHours()).padStart(2,"0")}:${String(o.getMinutes()).padStart(2,"0")}:${String(o.getSeconds()).padStart(2,"0")}.${String(o.getMilliseconds()).padStart(3,"0")}`;console.log(`[${n}] ${e}`,...t)}document.addEventListener("DOMContentLoaded",(()=>{setTimeout(a,750),setTimeout(p,1500)}))}},o={};function n(e){var s=o[e];if(void 0!==s)return s.exports;var c=o[e]={exports:{}};return t[e](c,c.exports,n),c.exports}n.m=t,e=[],n.O=(t,o,s,c)=>{if(!o){var r=1/0;for(i=0;i<e.length;i++){for(var[o,s,c]=e[i],a=!0,l=0;l<o.length;l++)(!1&c||r>=c)&&Object.keys(n.O).every((e=>n.O[e](o[l])))?o.splice(l--,1):(a=!1,c<r&&(r=c));if(a){e.splice(i--,1);var d=s();void 0!==d&&(t=d)}}return t}c=c||0;for(var i=e.length;i>0&&e[i-1][2]>c;i--)e[i]=e[i-1];e[i]=[o,s,c]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={15:0,278:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var s,c,[r,a,l]=o,d=0;if(r.some((t=>0!==e[t]))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(l)var i=l(n)}for(t&&t(o);d<r.length;d++)c=r[d],n.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return n.O(i)},o=globalThis.webpackChunkhappycoders_multiple_addresses=globalThis.webpackChunkhappycoders_multiple_addresses||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var s=n.O(void 0,[278],(()=>n(144)));s=n.O(s)})();