{"version":3,"file":"block-frontend.js","mappings":"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E;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;;;;UEjDA;UACA;UACA;UACA;UACA","sources":["webpack://happycoders-multiple-addresses/./src/block-frontend.js","webpack://happycoders-multiple-addresses/./src/style.scss","webpack://happycoders-multiple-addresses/external window [\"wp\",\"apiFetch\"]","webpack://happycoders-multiple-addresses/external window [\"wp\",\"components\"]","webpack://happycoders-multiple-addresses/external window [\"wp\",\"data\"]","webpack://happycoders-multiple-addresses/external window [\"wp\",\"element\"]","webpack://happycoders-multiple-addresses/external window [\"wp\",\"i18n\"]","webpack://happycoders-multiple-addresses/external window \"ReactJSXRuntime\"","webpack://happycoders-multiple-addresses/webpack/bootstrap","webpack://happycoders-multiple-addresses/webpack/runtime/chunk loaded","webpack://happycoders-multiple-addresses/webpack/runtime/compat get default export","webpack://happycoders-multiple-addresses/webpack/runtime/define property getters","webpack://happycoders-multiple-addresses/webpack/runtime/hasOwnProperty shorthand","webpack://happycoders-multiple-addresses/webpack/runtime/make namespace object","webpack://happycoders-multiple-addresses/webpack/runtime/jsonp chunk loading","webpack://happycoders-multiple-addresses/webpack/before-startup","webpack://happycoders-multiple-addresses/webpack/startup","webpack://happycoders-multiple-addresses/webpack/after-startup"],"sourcesContent":["import { render, useState, useEffect, useCallback, Fragment } from '@wordpress/element';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { useSelect, dispatch, useDispatch } from '@wordpress/data';\r\nimport { SelectControl, RadioControl, TextControl } from '@wordpress/components';\r\nimport apiFetch from '@wordpress/api-fetch';\r\nimport './style.scss';\r\n\r\n// Get localized params (check if available)\r\nconst params = window.hc_wcma_block_params || {}; // Use params localized in PHP\r\nconst i18n = params.i18n || {};\r\n// console.log(\"[HCMA Blocks Frontend] Initializing. Params:\", params);\r\n\r\n// --- !! VERIFY STORE KEYS & ACTIONS !! ---\r\nconst CART_STORE_KEY = 'wc/store/cart';\r\n// --- End Verification ---\r\n\r\n// --- Frontend React Component ---\r\nconst AddressSelectorFrontend = ({ addressType = 'billing' }) => {\r\n    // console.log(`[HCMA Blocks Frontend] Rendering for type: ${addressType}`);\r\n\r\n       // --- State & Data ---\r\n    // Find the specific default key for this instance type\r\n    const initialDefaultKey = params.defaultKeys?.[addressType] || '';\r\n    const [selectedKey, setSelectedKey] = useState(initialDefaultKey);\r\n    const [nicknameType, setNicknameType] = useState('');\r\n    const [nickname, setNickname] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [isNewCustomer, setIsNewCustomer] = useState(false);\r\n    const allAddresses = params.addresses || {};\r\n\r\n    // Ensure savedAddresses is an array, handling potential empty object from PHP\r\n    const addressesForType = allAddresses[addressType] || {};\r\n    const savedAddresses = Object.keys(addressesForType).length > 0 ? Object.values(addressesForType) : [];\r\n\r\n    const allowNew = params.allow_new === 'yes';\r\n    const selectorStyle = params.selector_style || 'dropdown';\r\n    const existingNicknames = params.existing_nicknames || {};\r\n\r\n    // console.log(`[HCMA Blocks Frontend ${addressType}] Initial Default Key:`, initialDefaultKey);\r\n    // console.log(`[HCMA Blocks Frontend ${addressType}] Current Selected Key (State):`, selectedKey);\r\n\r\n    const updateWcAddress = useCallback((addressData) => {\r\n        // console.log(`[HCMA Blocks ${addressType}] updateWcAddress called with data:`, addressData);\r\n        setLoading(true);\r\n        const actionPayload = { [addressType + '_address']: addressData };\r\n        // console.log(`[HCMA Blocks ${addressType}] Dispatching action with payload:`, actionPayload);\r\n        return dispatch(CART_STORE_KEY)\r\n            .updateCustomerData(actionPayload, false) // Assuming updateCustomerData is correct\r\n            .then(() => {\r\n                // console.log(`[HCMA Blocks ${addressType}] Dispatch successful.`);\r\n                setLoading(false);\r\n            })\r\n            .catch((err) => {\r\n                // console.error(`[HCMA Blocks ${addressType}] Dispatch ERROR:`, err);\r\n                setLoading(false);\r\n                // Rethrow or handle error appropriately\r\n                throw err;\r\n            });\r\n    }, [dispatch, addressType]); // Add dispatch as dependency\r\n\r\n    // --- Handle selection change ---\r\n    const handleSelectionChange = useCallback((newKey) => {\r\n        setSelectedKey(newKey);\r\n        // console.log(`[HCMA Block Frontend ${addressType}] Selection changed to: ${newKey}`);\r\n        setLoading(true);\r\n\r\n        if (newKey === 'new' || newKey === '') {\r\n            // console.log(`[HCMA Block Frontend ${addressType}] Clearing address in store.`);\r\n             const clearAddress = {\r\n                first_name: '',\r\n                last_name: '',\r\n                company: '',\r\n                address_1: '',\r\n                address_2: '',\r\n                city: '',\r\n                state: '',\r\n                postcode: '',\r\n                country: '',\r\n                phone: '',\r\n                nickname: '', // Set nickname if provided\r\n            };\r\n            \r\n            if (addressType === 'billing') {\r\n                clearAddress.email = '';\r\n            }\r\n            \r\n            updateWcAddress(clearAddress)\r\n                .then(() => { setLoading(false); setEditingState(addressType, true); }) // Show form on success\r\n                .catch(() => { setLoading(false); setEditingState(addressType, true) }); // Show form on error too\r\n\r\n        } else {\r\n            const selectedAddress = allAddresses[addressType]?.[newKey];\r\n            if (selectedAddress) {\r\n                // console.log(`[HCMA Block Frontend ${addressType}] Found saved address:`, selectedAddress);\r\n                // --- Format address for store ---\r\n                 const addressForStore = {\r\n                    first_name: selectedAddress.first_name || '',\r\n                    last_name: selectedAddress.last_name || '',\r\n                    company: selectedAddress.company || '',\r\n                    address_1: selectedAddress.address_1 || '',\r\n                    address_2: selectedAddress.address_2 || '',\r\n                    city: selectedAddress.city || '',\r\n                    state: selectedAddress.state || '',\r\n                    postcode: selectedAddress.postcode || '',\r\n                    country: selectedAddress.country || '',\r\n                    phone: selectedAddress.phone || '',\r\n                    nickname: selectedAddress.nickname || '',\r\n                };\r\n                \r\n                if (addressType === 'billing') {\r\n                    addressForStore.email = selectedAddress.email || '';\r\n                }\r\n                \r\n                updateWcAddress(addressForStore)\r\n                    .then(() => { setLoading(false); setEditingState(addressType, false) }) // Show card on success\r\n                    .catch(() => { setLoading(false); setEditingState(addressType, true) });\r\n                // TODO: Signal parent block to HIDE fields if needed\r\n            } else {\r\n                // console.error(`[HCMA Block Frontend ${addressType}] Could not find address data for key:`, newKey);\r\n                setEditingState(addressType, true);\r\n                setLoading(false);\r\n            }\r\n        }\r\n    }, [addressType, allAddresses, updateWcAddress]); // Dependencies\r\n\r\n    useEffect(() => {\r\n        // console.log(`[HCMA Blocks ${addressType}] Initial load effect. Default Key:`, initialDefaultKey);\r\n        // Check if initialDefaultKey exists and is valid in the saved addresses\r\n        if (initialDefaultKey && addressesForType[initialDefaultKey]) {\r\n            //  console.log(`[HCMA Blocks ${addressType}] Valid default key found. Setting state and dispatching update.`);\r\n            setSelectedKey(initialDefaultKey); // Set dropdown state\r\n\r\n            // Format the default address for the store\r\n            const defaultAddressData = addressesForType[initialDefaultKey];\r\n            const addressForStore = {\r\n                first_name: defaultAddressData.first_name || '',\r\n                last_name: defaultAddressData.last_name || '',\r\n                company: defaultAddressData.company || '',\r\n                address_1: defaultAddressData.address_1 || '',\r\n                address_2: defaultAddressData.address_2 || '',\r\n                city: defaultAddressData.city || '',\r\n                state: defaultAddressData.state || '',\r\n                postcode: defaultAddressData.postcode || '',\r\n                country: defaultAddressData.country || '',\r\n                phone: defaultAddressData.phone || '',\r\n                nickname: defaultAddressData.nickname || '',\r\n            };\r\n            \r\n            if (addressType === 'billing') {\r\n                addressForStore.email = defaultAddressData.email || '';\r\n            }\r\n            \r\n            // Dispatch the update to overwrite WC's default (e.g., last order address)\r\n            updateWcAddress(addressForStore)\r\n                .then(() => setEditingState(addressType, false)) // Show form on success\r\n                .catch(() => setEditingState(addressType, true));\r\n        } else {\r\n            // No valid default key, ensure form is shown initially\r\n            // console.log(`[HCMA Blocks ${addressType}] No valid default key found. Ensuring form is visible.`);\r\n            if (savedAddresses.length === 0) {\r\n                setIsNewCustomer(true);                \r\n            }\r\n            setSelectedKey(''); // Ensure dropdown shows '-- Select --'\r\n            setEditingState(addressType, true);\r\n        }\r\n        // Run only once on initial mount (or if initialDefaultKey/address data somehow changes)\r\n    }, [initialDefaultKey, addressType, addressesForType, updateWcAddress]);\r\n\r\n    useEffect(() => {\r\n        // Only run if a new address is being added\r\n        if (selectedKey === 'new' || isNewCustomer) {\r\n            const data = {\r\n                address_type: addressType,\r\n                nickname_type: nicknameType,\r\n                nickname: nickname,\r\n            };\r\n\r\n            // Use fetch to send the data to the new endpoint\r\n            apiFetch({\r\n                path: '/hc-wcma/v1/save-nickname',\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                data: data,\r\n            })\r\n                .then((response) => {\r\n                    if (!response.success) {\r\n                        console.error('Error saving nickname:', response.message);\r\n                    } else {\r\n                        // console.log('Nickname saved:', response);\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    console.error('Error saving nickname:', error);\r\n                });\r\n        }\r\n    }, [nicknameType, nickname, selectedKey, addressType, isNewCustomer]); \r\n\r\n    // --- Prepare options ---\r\n    // console.log(`[HCMA Blocks Frontend ${addressType}] Preparing options. Saved Addresses Count:`, savedAddresses.length);\r\n    // console.log(`[HCMA Blocks Frontend ${addressType}] Allow New:`, allowNew);\r\n\r\n    const options = [];\r\n    // const selectLabel = addressType === 'billing' ? (i18n.select_billing || '-- Select Billing Address --') : (i18n.select_shipping || '-- Select Shipping Address --');\r\n    // options.push({ label: selectLabel, value: '' });\r\n    // Add saved addresses\r\n    savedAddresses.forEach(addr => {\r\n        // Use addr.key which PHP added\r\n        if (!addr.key) {\r\n            //  console.warn(`[HCMA Blocks Frontend ${addressType}] Address missing 'key':`, addr);\r\n            return; // Skip if key is missing\r\n        }\r\n        let label = addr.nickname || addr.address_1 || addr.city || addr.key; // Improved label fallback\r\n        if (addr.key === initialDefaultKey) {\r\n            label += ` ${i18n.default_label || '(Default)'}`;\r\n        }\r\n        options.push({ label: label, value: addr.key });\r\n    });\r\n    \r\n    // Conditionally add \"Enter New Address\" option\r\n    if (allowNew) {\r\n        options.push({ label: i18n.new_address || 'Enter a new address', value: 'new' });\r\n    }\r\n    // console.log(`[HCMA Blocks Frontend ${addressType}] Final options count:`, options.length);\r\n\r\n\r\n    // --- Check if component should render ---\r\n    if (options.length < 1 && !isNewCustomer) {\r\n        // console.log(`[HCMA Blocks Frontend ${addressType}] Conditions not met for display (options.length=${options.length}, allowNew=${allowNew}). Returning null.`);\r\n        return null; // Render nothing if no actual addresses to choose from\r\n    }\r\n\r\n    const nicknameOptions = [\r\n        { label: i18n.select_nickname || __('Select Nickname', 'happycoders-multiple-addresses'), value: '' },\r\n        { label: i18n.home || __('Home', 'happycoders-multiple-addresses'), value: 'Home', disabled: existingNicknames[addressType]?.includes('Home') },\r\n        { label: i18n.work || __('Work', 'happycoders-multiple-addresses'), value: 'Work', disabled: existingNicknames[addressType]?.includes('Work') },\r\n        { label: i18n.other || __('Other', 'happycoders-multiple-addresses'), value: 'Other' },\r\n    ];\r\n\r\n    // --- Render the component ---\r\n    // console.log(`[HCMA Blocks Frontend ${addressType}] Rendering Select/Radio control. Selected Key: ${selectedKey}`);\r\n    try {\r\n        return (\r\n            // Added CSS class from block.json name for styling wrapper\r\n            <div className={`hc-wcma-block-checkout-selector hc-wcma-${addressType}-selector ${loading ? 'is-loading' : ''} wp-block-hc-wcma-address-selector`}>\r\n                <div style={{ marginBottom: '1em', opacity: loading ? 0.5 : 1, pointerEvents: loading ? 'none' : 'auto' }}>\r\n                    {selectorStyle === 'list' ? (\r\n                        <RadioControl\r\n                            // label={selectLabel} // Label often redundant if header exists\r\n                            selected={selectedKey}\r\n                            options={options}\r\n                            onChange={handleSelectionChange}\r\n                            className=\"hc-wcma-address-radio-list\"\r\n                        />\r\n                    ) : (\r\n                        <SelectControl\r\n                            // label={selectLabel} // Label often redundant if header exists\r\n                            value={selectedKey}\r\n                            options={options}\r\n                            onChange={handleSelectionChange}\r\n                            className=\"hc-wcma-address-select\"\r\n                        // Help text if needed: __experimental__help={ __('Select a saved address or enter a new one.', 'happycoders-multiple-addresses')}\r\n                        />\r\n                    )}\r\n\r\n                    {(selectedKey === 'new' || isNewCustomer) && (\r\n                        <div className=\"hc-wcma-nickname-fields\">\r\n                            <SelectControl\r\n                                label={i18n.address_nickname_type || __('Address Nickname Type', 'happycoders-multiple-addresses')}\r\n                                value={nicknameType}\r\n                                options={nicknameOptions}\r\n                                onChange={(value) => setNicknameType(value)}\r\n                            />\r\n                            {nicknameType === 'Other' && (\r\n                                <TextControl\r\n                                    label={i18n.custom_nickname || __('Custom Nickname', 'happycoders-multiple-addresses')}\r\n                                    value={nickname}\r\n                                    onChange={(value) => setNickname(value)}\r\n                                />\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {loading && <p className=\"hc-wcma-loading-text\">{i18n.loading || 'Loading...'}</p>}\r\n            </div>\r\n        );\r\n    } catch (error) {\r\n        // console.error(`[HCMA Blocks Frontend ${addressType}] Error during render:`, error);\r\n        return <p style={{color: 'red', border: '1px solid red', padding: '5px'}}>Error rendering HCMA selector!</p>; // Render an error message\r\n    }\r\n};\r\n\r\nfunction mountAddressSelectors() {\r\n    // We need the localized data to know which addresses exist\r\n    const addresses = params.addresses || {};\r\n    const billingAddressesExist = addresses.billing && Object.keys(addresses.billing).length > 0;\r\n    const shippingAddressesExist = addresses.shipping && Object.keys(addresses.shipping).length > 0;\r\n    const allowNew = params.allow_new === 'yes';\r\n\r\n    // --- Mount Billing Selector ---\r\n    // Only mount if there are addresses or 'new' is allowed\r\n    if (billingAddressesExist || allowNew) {\r\n         // Find the TARGET PARENT block where the billing selector should go\r\n        const billingParentTarget = document.querySelector('.wp-block-woocommerce-checkout-billing-address-block .wc-block-components-checkout-step__content'); // Adjust selector if needed!\r\n\r\n        if (billingParentTarget) {\r\n            // Create a NEW container div for React each time\r\n            const billingMountPoint = document.createElement('div');\r\n            billingMountPoint.className = 'hc-wcma-billing-mount-point'; // Add class for styling/identification\r\n            // Prepend it inside the target parent\r\n            billingParentTarget.prepend(billingMountPoint);\r\n            // console.log('[HCMA Blocks Frontend] Attempting to mount BILLING component into:', billingParentTarget);\r\n\r\n             // Check if already mounted to prevent errors on HMR etc.\r\n             if (!billingMountPoint.dataset.reactMounted) {\r\n                 try {\r\n                      render(<AddressSelectorFrontend addressType=\"billing\" />, billingMountPoint);\r\n                      billingMountPoint.dataset.reactMounted = 'true';\r\n                    //   console.log('[HCMA Blocks Frontend] Billing component mounted.');\r\n                 } catch (error) { console.error('[HCMA Blocks Frontend] Error mounting billing component:', error); }\r\n             }\r\n         } else {\r\n            //   console.warn('[HCMA Blocks Frontend] Billing parent target not found.');\r\n         }\r\n    } else {\r\n         console.log('[HCMA Blocks Frontend] Skipping Billing selector - no addresses and new not allowed.');\r\n    }\r\n\r\n\r\n     // --- Mount Shipping Selector ---\r\n     // Only mount if there are addresses or 'new' is allowed AND shipping is needed? (Need shipping status)\r\n     // TODO: Get shipping visibility status from WC Blocks data store if possible\r\n     const shouldMountShipping = shippingAddressesExist || allowNew; // Add check for needsShipping later\r\n\r\n     if (shouldMountShipping) {\r\n         const shippingParentTarget = document.querySelector('.wp-block-woocommerce-checkout-shipping-address-block .wc-block-components-checkout-step__content'); // Adjust selector if needed!\r\n\r\n         if (shippingParentTarget) {\r\n             const shippingMountPoint = document.createElement('div');\r\n             shippingMountPoint.className = 'hc-wcma-shipping-mount-point';\r\n             shippingParentTarget.prepend(shippingMountPoint);\r\n            //   console.log('[HCMA Blocks Frontend] Attempting to mount SHIPPING component into:', shippingParentTarget);\r\n\r\n              if (!shippingMountPoint.dataset.reactMounted) {\r\n                  try {\r\n                       render(<AddressSelectorFrontend addressType=\"shipping\" />, shippingMountPoint);\r\n                       shippingMountPoint.dataset.reactMounted = 'true';\r\n                    //    console.log('[HCMA Blocks Frontend] Shipping component mounted.');\r\n                  } catch (error) { console.error('[HCMA Blocks Frontend] Error mounting shipping component:', error); }\r\n              }\r\n          } else {\r\n            //    console.warn('[HCMA Blocks Frontend] Shipping parent target not found.');\r\n          }\r\n     } else {\r\n          console.log('[HCMA Blocks Frontend] Skipping Shipping selector.');\r\n     }\r\n     setTimeout(hideWcEditButtons, 100);\r\n} // End mountAddressSelectors\r\n\r\nfunction hideWcEditButtons() {\r\n    // console.log('[HCMA Blocks Frontend] Attempting to hide WC Edit buttons...');\r\n    const editButtons = document.querySelectorAll('.wc-block-components-address-card .wc-block-components-address-card__edit');\r\n    if (editButtons.length > 0) {\r\n         editButtons.forEach(button => {\r\n             button.style.display = 'none';\r\n         });\r\n        //  console.log(`[HCMA Blocks Frontend] Hide ${editButtons.length} WC Edit button(s).`);\r\n    } else {\r\n        // console.log('[HCMA Blocks Frontend] No WC Edit buttons found to hide.');\r\n    }\r\n}\r\n\r\nfunction mountSingleAddressSelector(addressType) {\r\n    // logWithTimestamp(`Attempting to mount selector for type: ${addressType}`);\r\n    const addresses = params.addresses || {};\r\n    const addressesExist = addresses[addressType] && Object.keys(addresses[addressType]).length > 0;\r\n    const allowNew = params.allow_new === 'yes';\r\n\r\n    if (!addressesExist && !allowNew) { /* ... skip message ... */ return; }\r\n\r\n    // --- Find PARENT Block ---\r\n    const parentSelector = `.wp-block-woocommerce-checkout-${addressType}-address-block .wc-block-components-checkout-step__content`;\r\n    const parentTarget = document.querySelector(parentSelector);\r\n\r\n    if (parentTarget) {\r\n        // Find or Create Mount Point\r\n        let mountPoint = parentTarget.querySelector(`.hc-wcma-${addressType}-mount-point`);\r\n        if (!mountPoint) {\r\n            mountPoint = document.createElement('div');\r\n            mountPoint.className = `hc-wcma-${addressType}-mount-point`;\r\n             // --- Inject relative to a specific inner element if possible ---\r\n             // Example: Inject before the checkout step content div\r\n             const contentDiv = parentTarget.querySelector('.wc-block-components-checkout-step__content');\r\n             if (contentDiv) {\r\n                 contentDiv.parentNode.insertBefore(mountPoint, contentDiv); // Insert before content\r\n                //  logWithTimestamp(`Prepended mount point for ${addressType} before content div.`);\r\n             } else {\r\n                 parentTarget.prepend(mountPoint); // Fallback to prepending to parent\r\n                //  logWithTimestamp(`Prepended mount point for ${addressType} to parent.`);\r\n             }\r\n        } else {\r\n             logWithTimestamp(`Mount point already exists for ${addressType}.`);\r\n        }\r\n\r\n        // Mount React component\r\n        if (!mountPoint.dataset.reactMounted) {\r\n            try {\r\n                 render(<AddressSelectorFrontend addressType={addressType} />, mountPoint);\r\n                 mountPoint.dataset.reactMounted = 'true';\r\n\r\n                 setEditingState(addressType, false);\r\n                //  logWithTimestamp(`${addressType} component mounted.`);\r\n            } catch (error) { console.error(`Error mounting ${addressType} component:`, error); }\r\n        } else { /* ... already mounted log ... */ }\r\n    } else { /* ... parent not found log ... */ }\r\n}\r\n\r\n// --- Helper: Toggle Editing Class ---\r\nfunction setEditingState(addressType, isEditing) {\r\n    // --- !! VERIFY THIS SELECTOR !! ---\r\n    const wrapperSelector = `#${addressType}-fields .wc-block-components-address-address-wrapper`; \r\n    const wrapper = document.querySelector(wrapperSelector);\r\n    if (wrapper) {\r\n        if (isEditing) {\r\n            wrapper.classList.add('is-editing');\r\n            // console.log(`[HCMA Blocks ${addressType}] Added 'is-editing' class`);\r\n        } else {\r\n            wrapper.classList.remove('is-editing');\r\n            // console.log(`[HCMA Blocks ${addressType}] Removed 'is-editing' class`);\r\n            setTimeout(() => hideWcEditButtons(addressType), 100); // Hide WC edit button when showing card\r\n        }\r\n    } else {\r\n        console.warn(`[HCMA Blocks ${addressType}] Wrapper '${wrapperSelector}' not found to toggle is-editing.`);\r\n    }\r\n}\r\n\r\n// --- *** Mutation Observer to Detect Billing and Shipping Block Re-Add *** ---\r\nlet checkoutObserver = null;\r\n\r\nfunction startCheckoutObserver() {\r\n    const checkoutContainer = document.querySelector('.wp-block-woocommerce-checkout');\r\n    if (!checkoutContainer) {\r\n        return;\r\n    }\r\n    if (checkoutObserver) {\r\n        return;\r\n    }\r\n\r\n    checkoutObserver = new MutationObserver((mutationsList) => {\r\n        let billingBlockAdded = false;\r\n        let shippingBlockAdded = false;\r\n\r\n        for (const mutation of mutationsList) {\r\n            if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {\r\n                mutation.addedNodes.forEach(node => {\r\n                    if (node.nodeType === 1) {\r\n                        if (node.matches('.wp-block-woocommerce-checkout-billing-address-block') || node.querySelector('.wp-block-woocommerce-checkout-billing-address-block')) {\r\n                            billingBlockAdded = true;\r\n                        }\r\n                        if (node.matches('.wp-block-woocommerce-checkout-shipping-address-block') || node.querySelector('.wp-block-woocommerce-checkout-shipping-address-block')) {\r\n                            shippingBlockAdded = true;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            if (billingBlockAdded && shippingBlockAdded) break;\r\n        }\r\n\r\n        if (billingBlockAdded) {\r\n            setTimeout(() => mountSingleAddressSelector('billing'), 150);\r\n        }\r\n        if (shippingBlockAdded) {\r\n            setTimeout(() => mountSingleAddressSelector('shipping'), 150);\r\n        }\r\n    });\r\n\r\n    checkoutObserver.observe(checkoutContainer, { childList: true, subtree: true });\r\n}\r\n\r\nfunction logWithTimestamp(message, ...args) {\r\n    const now = new Date();\r\n    // Format time as HH:MM:SS.milliseconds (e.g., 14:05:21.123)\r\n    const time = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}:${String(now.getSeconds()).padStart(2, '0')}.${String(now.getMilliseconds()).padStart(3, '0')}`;\r\n    \r\n    // Use console.log, passing the formatted prefix and any additional arguments\r\n    console.log(`[${time}] ${message}`, ...args);\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    // console.log('[HCMA Blocks Frontend] DOMContentLoaded fired. Waiting slightly to mount...');\r\n    setTimeout(mountAddressSelectors, 750); // Wait 500ms for WC Blocks to potentially render\r\n    setTimeout(startCheckoutObserver, 1500);\r\n});\r\n\r\n// --- HMR (Hot Module Replacement) Support for Development ---\r\nif (module.hot) {\r\n    module.hot.accept('./block-frontend.js', () => {\r\n        // console.log('[HCMA Blocks HMR] Hot-reloading frontend script. Re-mounting...');\r\n        // Find and remove existing mount points before re-adding\r\n        document.querySelectorAll('.hc-wcma-billing-mount-point, .hc-wcma-shipping-mount-point').forEach(el => el.remove());\r\n        // Disconnect observer if it exists\r\n        if (checkoutObserver) {\r\n            checkoutObserver.disconnect();\r\n            checkoutObserver = null;\r\n            // console.log('[HCMA Blocks HMR] Disconnected old observer.');\r\n        }\r\n        // Re-run the setup\r\n        setTimeout(mountAddressSelectors, 500);\r\n        setTimeout(startCheckoutObserver, 1500);\r\n    });\r\n}","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"block-frontend\": 0,\n\t\"./style-block-frontend\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkhappycoders_multiple_addresses\"] = globalThis[\"webpackChunkhappycoders_multiple_addresses\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"./style-block-frontend\"], () => (__webpack_require__(\"./src/block-frontend.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["render","useState","useEffect","useCallback","Fragment","__","sprintf","useSelect","dispatch","useDispatch","SelectControl","RadioControl","TextControl","apiFetch","jsx","_jsx","jsxs","_jsxs","params","window","hc_wcma_block_params","i18n","CART_STORE_KEY","AddressSelectorFrontend","addressType","initialDefaultKey","defaultKeys","selectedKey","setSelectedKey","nicknameType","setNicknameType","nickname","setNickname","loading","setLoading","isNewCustomer","setIsNewCustomer","allAddresses","addresses","addressesForType","savedAddresses","Object","keys","length","values","allowNew","allow_new","selectorStyle","selector_style","existingNicknames","existing_nicknames","updateWcAddress","addressData","actionPayload","updateCustomerData","then","catch","err","handleSelectionChange","newKey","clearAddress","first_name","last_name","company","address_1","address_2","city","state","postcode","country","phone","email","setEditingState","selectedAddress","addressForStore","defaultAddressData","data","address_type","nickname_type","path","method","headers","response","success","console","error","message","options","forEach","addr","key","label","default_label","push","value","new_address","nicknameOptions","select_nickname","home","disabled","includes","work","other","className","children","style","marginBottom","opacity","pointerEvents","selected","onChange","address_nickname_type","custom_nickname","color","border","padding","mountAddressSelectors","billingAddressesExist","billing","shippingAddressesExist","shipping","billingParentTarget","document","querySelector","billingMountPoint","createElement","prepend","dataset","reactMounted","log","shouldMountShipping","shippingParentTarget","shippingMountPoint","setTimeout","hideWcEditButtons","editButtons","querySelectorAll","button","display","mountSingleAddressSelector","addressesExist","parentSelector","parentTarget","mountPoint","contentDiv","parentNode","insertBefore","logWithTimestamp","isEditing","wrapperSelector","wrapper","classList","add","remove","warn","checkoutObserver","startCheckoutObserver","checkoutContainer","MutationObserver","mutationsList","billingBlockAdded","shippingBlockAdded","mutation","type","addedNodes","node","nodeType","matches","observe","childList","subtree","args","now","Date","time","String","getHours","padStart","getMinutes","getSeconds","getMilliseconds","addEventListener","module","hot","accept","el","disconnect"],"sourceRoot":""}